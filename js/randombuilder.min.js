var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},UnknownLibrary,Mechwarrior,RandomBuilder,app;(function(n){"use strict";var h=function(){function n(){}return n.getDate=function(){var n=new Date;return Number(n.getFullYear()+("0"+(n.getMonth()+1)).slice(-2)+("0"+n.getDate()).slice(-2))},n.getTime=function(){return(new Date).getTime()},n}(),i,r,u,t,f,c,e,o,s,l;n.Time=h;i=function(){function n(){this.seed()}return n.prototype.seed=function(n){n===void 0&&(n=88675123);this.x=123456789;this.y=362436069;this.z=521288629;this.w=isFinite(n)?n:88675123},n.prototype.getSeed=function(){return this.w},n.prototype.getNameSeed=function(n){for(var i=0,t=0;t<n.length;t++)i+=n.charCodeAt(t);return i},n.prototype.rand=function(){var n=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>19^n^n>>8},n.prototype.range=function(n,t){return this.rand()%(t-n+1)+n},n}();n.XorShift=i;r=function(){function n(){}return n.Parse=function(n){var t={},i;return n?(i=n.slice(1).split("&"),i.forEach(function(n){var i=n.split("=");i[1]!==undefined&&(t[i[0]]=i[1])}),t):t},n.Create=function(n){var t="?";for(var i in n)n.hasOwnProperty(i)&&n[i]&&(t+=(t.length<=1?"":"&")+i+"="+n[i]);return t.length<=1?null:t},n}();n.URLParser=r;u=function(){function n(n,t){this.$http=n;this.$q=t}return n.prototype.load=function(n){var i=this.$q.defer();return this.$q.when(this.getJson(n)).then(function(n){return i.resolve(new t(n.status>=200&&n.status<=204?!0:!1,n.data))}),i.promise},n.prototype.getJson=function(n){return this.$http.get(n)},n}();n.LoadJson=u;t=function(){function n(n,t){n===void 0&&(n=!1);this.status=n;this.data=t}return n}();n.Response=t;f=function(){function n(){}return n.convert=function(n){var t=0;return n.forEach(function(n,i){t+=Number(n)*Math.pow(2,i)}),t},n}();n.Bitflag=f,function(n){n[n.primary=0]="primary";n[n.secondary=1]="secondary";n[n.tertiary=2]="tertiary"}(n.Priority||(n.Priority={}));c=n.Priority;e=function(){function n(){this.weight=1}return n}();n.Weighting=e;o=function(){function n(){this.value=-1}return n}();n.Max=o;s=function(){function n(n,t){n===void 0&&(n=0);t===void 0&&(t=0);this.min=n;this.max=t}return n}();n.MinMax=s,function(n){var t=function(){function n(){}return n.Capitalize=function(){return function(n){return n=String(n),n!==undefined&&n.length>0?n.charAt(0).toLocaleUpperCase()+n.substr(1).toLocaleLowerCase():""}},n}();n.Filter=t}(l=n.Angular||(n.Angular={}))})(UnknownLibrary||(UnknownLibrary={})),function(n){"use strict";var c=function(n){function t(t){(t===void 0&&(t=null),n.call(this),this.id=-1,t!==null)&&(this.id=t.i,this.name=t.n,this.faction=t.f,this.class=t.c,this.type=t.t===undefined?e.MechType.Normal:t.t,this.hardpoints=new u({ballistic:t.h.b,energy:t.h.e,missile:t.h.m}))}return __extends(t,n),t}(UnknownLibrary.Weighting),o,t,i,r,s,u,h,f,e;n.MechLite=c;o=function(n){function u(u){(u===void 0&&(u=null),n.call(this),this.id=-1,this.description=null,u!==null)&&(this.id=u.id,this.name=u.name,this.name_translated=u.name_translated,this.chassis=u.chassis,this.chassis_translated=u.chassis_translated,this.tons=u.tons,this.tons_fixed=u.tons_fixed,this.faction=u.faction,this.class=u.class,this.type=u.type,this.omni=u.omni===undefined?!1:u.omni,this.ecm=u.ecm===undefined?!1:u.ecm,this.masc=u.masc===undefined?!1:u.masc,this.jumpjets=new t(u.jumpjets),this.armor=new i(u.armor),this.engine=new r(u.engine),this.upgrades=u.upgrades,this.hardpoints=u.hardpoints)}return __extends(u,n),u}(UnknownLibrary.Weighting);n.Mech=o;t=function(){function n(n){(n===void 0&&(n=null),this.stock=0,this.current=0,n!==null)&&(this.max=n.max,this.current=this.stock=n.stock)}return n}();n.MechJumpjets=t;i=function(){function n(n){(n===void 0&&(n=null),this.max=0,this.stock=0,this.current=0,n!==null)&&(this.max=n.max,this.current=this.stock=n.stock)}return n}();n.MechArmor=i;r=function(){function n(n){(n===void 0&&(n=null),this.min=0,this.max=0,n!==null)&&(this.min=n.min,this.max=n.max,this.current=this.stock=new f(n.stock))}return n}();n.MechEngine=r;s=function(){function n(){}return n}();n.MechUpgrades=s;u=function(){function n(n){(n===void 0&&(n=null),this.ballistic=0,this.energy=0,this.missile=0,n!==null)&&(n.ballistic!==undefined&&(this.ballistic=n.ballistic),n.energy!==undefined&&(this.energy=n.energy),n.missile!==undefined&&(this.missile=n.missile))}return n}();n.MechHardpoints=u;h=function(){function n(n){(n===void 0&&(n=null),n!==null)&&(this.name=n.name,this.name_translated=n.name_translated,this.type=n.type,this.faction=n.faction,this.tons=n.tons,this.support=n.support!==undefined?n.support:!1,this.guidance=n.guidance===undefined?e.GuidanceType.none:n.guidance)}return n}();n.Weapon=h;f=function(){function n(n){(n===void 0&&(n=null),this.rating=0,this.tons=0,n!==null)&&(this.type=n.type,this.rating=n.rating,this.tons=n.tons)}return n}();n.Engine=f,function(n){var t,i,r,u,f,e;(function(n){n[n.InnerSphere=0]="InnerSphere";n[n.Clan=1]="Clan"})(n.FactionType||(n.FactionType={}));t=n.FactionType,function(n){n[n.Light=0]="Light";n[n.Medium=1]="Medium";n[n.Heavy=2]="Heavy";n[n.Assault=3]="Assault"}(n.ClassType||(n.ClassType={}));i=n.ClassType,function(n){n[n.Normal=0]="Normal";n[n.Champion=1]="Champion";n[n.Hero=2]="Hero";n[n.Special=3]="Special"}(n.MechType||(n.MechType={}));r=n.MechType,function(n){n[n.ballistic=0]="ballistic";n[n.energy=1]="energy";n[n.missile=2]="missile"}(n.WeaponType||(n.WeaponType={}));u=n.WeaponType,function(n){n[n.std=0]="std";n[n.xl=1]="xl"}(n.EngineType||(n.EngineType={}));f=n.EngineType,function(n){n[n.none=0]="none";n[n.standard=1]="standard";n[n.artemis=2]="artemis"}(n.GuidanceType||(n.GuidanceType={}));e=n.GuidanceType}(e=n.Enum||(n.Enum={}))}(Mechwarrior||(Mechwarrior={})),function(n){"use strict";var c=function(){function n(n,t){this.dataManager=n;this.buildManager=t;this.Initialize()}return n.prototype.Initialize=function(){var n=this;this.status=new l;this.settings=new t;this.settings.seed.seed=UnknownLibrary.Time.getDate();this.itemList=new f;this.designerList=new a;this.dataManager.loadAll().then(function(t){var i,r;n.itemList=t.i;n.designerList.designer=t.d;n.designerList.designer.some(function(t){return t.default?(n.settings.design.designer=t.id,!0):!1});i=UnknownLibrary.URLParser.Parse(location.search);i.s!==undefined?(n.settings.fromLite(JSON.parse(decodeURI(window.atob(i.s)))),n.run(n.settings.seed.seed,!1)):Object.keys(i).length&&(i.n!==undefined&&(n.settings.name=String(i.n)),i.d!==undefined&&isFinite(i.d)&&(r=Number(i.d),n.designerList.designer.some(function(t){return t.id===r?(n.settings.design.designer=t.id,!0):!1})),i.t!==undefined&&isFinite(i.t)&&(n.settings.seed.seed=Number(i.t)),n.run(n.settings.seed.seed,!0));n.status.json=!0});this.runBuilder=angular.bind(this,function(t){t===void 0&&(t=!1);n.status.idle()&&n.run(t?-1:UnknownLibrary.Time.getDate(),!0)});this.getSpeed=angular.bind(this,function(n,t){return Math.round(n/t*16.2*10)/10});this.validation=function(n){for(var t in n)if(n.hasOwnProperty(t)&&n[t])return!0;return!1}},n.prototype.run=function(n,i){var r=this;n===void 0&&(n=-1);i===void 0&&(i=!1);this.status.build=!0;this.settings.seed.seed=n===-1?UnknownLibrary.Time.getTime():n;this.buildManager.run(this.designerList,this.itemList,this.settings).then(function(u){if(u.status){if(i&&JSON.stringify(new t(new t,!0))===JSON.stringify(new t(r.settings,!0))&&n!==-1){var f=UnknownLibrary.URLParser.Create({n:r.settings.name,t:r.settings.seed.seed,d:r.settings.design.designer?r.settings.design.designer:null});f&&window.history.pushState(null,null,f)}else window.history.pushState(null,null,"?s="+window.btoa(encodeURI(JSON.stringify(r.settings.toLite()))));r.result=u.data}else alert(u.data);r.status.build=!1})},n}(),r,u;n.Controller=c;r=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.loadAll=function(){var n=this.$q.defer();return this.$q.all([this.load("./json/mechs.json"),this.load("./json/chassis.json"),this.load("./json/weapons.json"),this.load("./json/engines.json"),this.load("./json/designer/default.json")]).then(function(t){var i={i:new f,d:[]};return t[0].data.forEach(function(n){i.i.mech.push(new Mechwarrior.MechLite(n))}),i.i.chassis=t[1].data,t[2].data.forEach(function(n){i.i.weapon.push(new Mechwarrior.Weapon(n))}),t[3].data.forEach(function(n){i.i.engine.push(new Mechwarrior.Engine(n))}),t[4].data.forEach(function(n){i.d.push(new v(n))}),n.resolve(i)}),n.promise},t.prototype.loadStockData=function(n){if(n===-1){var t=this.$q.defer();return this.$q.when().then(function(){return t.resolve(new UnknownLibrary.Response(!1,null))}),t.promise}return this.load("./json/stock/"+n+".json")},t}(UnknownLibrary.LoadJson);n.DataManager=r;u=function(){function n(n,t){this.xorshift=n;this.dataManager=t}return n.prototype.run=function(n,t,r){var u=this,f=this.dataManager.$q.defer();this.xorshift.seed(r.seed.seed+this.xorshift.getNameSeed(r.name.toLocaleLowerCase()));var e=this.getDesigner(r.design.designer,n.designer),s=this.designToMechlist(e,t,r),o=this.getRandomItemA(s);return this.dataManager.loadStockData(o===undefined?-1:o.id).then(function(n){var c;if(!n.status)return f.resolve(new UnknownLibrary.Response(!1,"\u5019\u88dc\u3068\u306a\u308b\u30e1\u30c3\u30af\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002"));var o=new Mechwarrior.Mech(n.data),h=u.checkRolelist(o,e.roles,r),s=h.length>0?new i(u.getRandomItemA(h)):new i;return s.name&&(o.description=s.name),o.omni||(r.upgrade.armor&&(o.upgrades.armor=u.getRandomItemA([{value:!0,weight:s.loadout.upgrades.armor},{value:!1,weight:s.loadout.upgrades.armor>=100?0:1}]).value),r.upgrade.structure&&(o.upgrades.structure=u.getRandomItemA([{value:!0,weight:s.loadout.upgrades.structure},{value:!1,weight:s.loadout.upgrades.structure>=100?0:1}]).value),r.upgrade.heatsink&&(o.upgrades.heatsink=u.getRandomItemA([{value:!0,weight:s.loadout.upgrades.heatsink},{value:!1,weight:s.loadout.upgrades.heatsink>=100?0:1}]).value)),r.upgrade.guidance&&(o.upgrades.guidance=u.getRandomItemA([{value:!0,weight:s.loadout.upgrades.guidance},{value:!1,weight:s.loadout.upgrades.guidance>=100?0:1}]).value),r.other.jumpjet&&(o.jumpjets.current=Math.ceil(o.jumpjets.max*u.xorshift.range(s.loadout.jumpjets.min,s.loadout.jumpjets.max)/100)),r.other.armor&&(o.armor.current=Math.floor(o.armor.max*u.xorshift.range(s.loadout.armor.min,s.loadout.armor.max)/100)),o.ecm&&(o.ecm=u.getRandomItemA([{value:!0,weight:s.loadout.ecm},{value:!1,weight:s.loadout.ecm>=100?0:1}]).value),c=u.selectEngine(o,t.engine,s.loadout.engines,r),o.engine.current=u.getRandomItemA(c),o.weapon=u.selectWeapon(o,t.weapon,s.loadout.weapons,r),f.resolve(new UnknownLibrary.Response(!0,o))}),f.promise},n.prototype.designToMechlist=function(n,t,i){var r;if(n===null)return null;var u=[],f="default",e=n.chassis[f]!==undefined?n.chassis[f]:1;for(r in t.chassis)t.chassis.hasOwnProperty(r)&&t.chassis[r].forEach(function(f){var o=null;t.mech.some(function(t){return t.id===f?(o=t,o.weight=n.variants[o.name]!==undefined?n.variants[o.name]:n.chassis[r]!==undefined?n.chassis[r]:e,o.weight>0&&i.class[Mechwarrior.Enum.ClassType[o.class].toLowerCase()]&&i.variant[Mechwarrior.Enum.MechType[o.type].toLowerCase()]&&i.tech[Mechwarrior.Enum.FactionType[o.faction]]&&(!i.weapon.ballistic&&!i.weapon.energy&&!i.weapon.missile||o.hardpoints.ballistic>0&&i.weapon.ballistic||o.hardpoints.energy>0&&i.weapon.energy||o.hardpoints.missile>0&&i.weapon.missile)&&u.push(o),!0):!1})});return u},n.prototype.checkRolelist=function(n,t,i){if(t===null)return null;var r=[];return t.forEach(function(t){t.requirements.some(function(u){if(!(n.tons>=u.tons.min&&n.tons<=u.tons.max))return!1;for(var f in u.hardpoints)if(u.hardpoints.hasOwnProperty(f)&&(n.hardpoints[f]<u.hardpoints[f]||!i.weapon[f]&&u.hardpoints[f]>0))return!1;return u.ecm&&!n.ecm?!1:u.jumpjets&&n.jumpjets.max===0?!1:(r.push(t),!1)})}),r},n.prototype.selectEngine=function(n,t,i,r){if(n===null||t===null)return null;var u=[],f=n.tons-(n.tons_fixed+n.armor.current/(n.upgrades.armor?35.8:32)+n.tons*(n.upgrades.structure?5:10)/100);return t.forEach(function(t){var e=Mechwarrior.Enum.EngineType[t.type],h;if(!n.omni&&r.engine[e]&&t.rating>=n.engine.min&&t.rating<=n.engine.max){var o=10-(t.rating>=250?10:Math.floor(t.rating/25)),c=i===undefined?n.tons/5:i.tons.min,l=i===undefined?n.tons*70/100:t.type===Mechwarrior.Enum.EngineType.std?i.tons.max:i.tons.max*3;f>=t.tons+o+c&&f<=t.tons+o+l&&(i===undefined||i[e][t.rating]!==undefined)&&(h=i===undefined?1:t.rating/n.tons*i[e][t.rating],u.push(new s(t,h)))}}),u.length===0&&t.some(function(t){return t.type===n.engine.stock.type&&t.rating===n.engine.stock.rating?(u.push(new s(t)),!0):!1}),u},n.prototype.selectWeapon=function(n,t,i,r){var c=this,u;if(n===null||t===null)return null;var f={},e=new h,o={ballistic:n.hardpoints.ballistic,energy:n.hardpoints.energy,missile:n.hardpoints.missile},s=n.tons-(n.engine.current.tons+n.tons_fixed+(10-(n.engine.current.rating>=250?10:Math.floor(n.engine.current.rating/25)))+n.armor.current/(n.upgrades.armor?35.8:32)+n.tons*(n.upgrades.structure?5:10)/100);for(u in e)e.hasOwnProperty(u)&&(t.forEach(function(t){var h;s>=t.tons+1&&o[Mechwarrior.Enum.WeaponType[t.type]]>0&&n.faction===t.faction&&n.hardpoints[Mechwarrior.Enum.WeaponType[t.type]]>0&&r.weapon[Mechwarrior.Enum.WeaponType[t.type]]&&(!t.support||t.support&&r.weapon2.support&&u!=="primary")&&(t.guidance===Mechwarrior.Enum.GuidanceType.none||!n.upgrades.guidance&&t.guidance===Mechwarrior.Enum.GuidanceType.standard||n.upgrades.guidance&&t.guidance===Mechwarrior.Enum.GuidanceType.artemis)&&(i===undefined||i[u]!==undefined&&i[u][t.name])&&c.checkCurrentWeapon(t.name,f)&&(h=i===undefined?1:i[u]===undefined?1:i[u][t.name],e[u][t.name]={name:t.name,weight:h})}),Object.keys(e[u]).length>0&&(f[u]===undefined&&(f[u]={}),f[u]=this.getWeapon(this.getRandomItem(e[u]).name,t),o[Mechwarrior.Enum.WeaponType[f[u].type]]-=1,s-=f[u].tons));return f},n.prototype.checkCurrentWeapon=function(n,t){for(var i in t)if(t.hasOwnProperty(i)&&t[i].name===n)return!1;return!0},n.prototype.getDesigner=function(n,t){var i=null;return t.some(function(t){return t.id===n?(i=t,!0):!1}),i},n.prototype.getWeapon=function(n,t){var i=null;return t.some(function(t){return t.name===n?(i=t,!0):!1}),i},n.prototype.getRandomItem=function(n,t){var i,r,u;t===void 0&&(t=1);i=new UnknownLibrary.Max;for(r in n)n.hasOwnProperty(r)&&(u=this.xorshift.rand()%100*(n[r].weight!==undefined?n[r].weight:t),u>i.value&&(i.value=u,i.target=n[r]));return i.target!==undefined&&i.target.weight!==undefined&&delete i.target.weight,i.target},n.prototype.getRandomItemA=function(n,t){var r=this,i;return t===void 0&&(t=1),i=new UnknownLibrary.Max,n.forEach(function(u,f){var e=r.xorshift.rand()%100*(n[f].weight!==undefined?n[f].weight:t);e>i.value&&(i.value=e,i.target=n[f])}),i.target!==undefined&&i.target.weight!==undefined&&delete i.target.weight,i.target},n}();n.BuildManager=u;var l=function(){function n(){this.json=!1;this.build=!1}return n.prototype.idle=function(){return this.json&&!this.build},n}(),t=function(){function n(n,t){if(n===void 0&&(n=null),t===void 0&&(t=!1),this.name="",this.tech={InnerSphere:!0,Clan:!0},this.class={light:!0,medium:!0,heavy:!0,assault:!0},this.variant={normal:!0,champion:!1,hero:!0,special:!1},this.weapon={ballistic:!0,energy:!0,missile:!0},this.weapon2={support:!0},this.upgrade={armor:!0,structure:!0,heatsink:!0,guidance:!0},this.engine={std:!0,xl:!0},this.other={quirk:!0,armor:!0,jumpjet:!0},this.design={designer:0},this.seed={seed:0},n!==null)for(var i in n)n.hasOwnProperty(i)&&this.hasOwnProperty(i)&&(t&&(i==="name"||i==="seed"||i==="design")||(this[i]=n[i]))}return n.prototype.toLite=function(){var n=[];return n.push(this.name),n.push(UnknownLibrary.Bitflag.convert([this.tech.InnerSphere,this.tech.Clan]).toString(16)+UnknownLibrary.Bitflag.convert([this.class.light,this.class.medium,this.class.heavy,this.class.assault]).toString(16)+UnknownLibrary.Bitflag.convert([this.variant.normal,this.variant.champion,this.variant.hero,this.variant.special]).toString(16)+UnknownLibrary.Bitflag.convert([this.weapon.ballistic,this.weapon.energy,this.weapon.missile]).toString(16)+UnknownLibrary.Bitflag.convert([this.upgrade.armor,this.upgrade.structure,this.upgrade.heatsink,this.upgrade.guidance]).toString(16)+UnknownLibrary.Bitflag.convert([this.engine.std,this.engine.xl]).toString(16)+UnknownLibrary.Bitflag.convert([this.other.quirk,this.other.armor,this.other.jumpjet]).toString(16)),n.push(this.design.designer),n.push(this.seed.seed),n},n.prototype.fromLite=function(n){var e,t,i,u,r,o,f;this.name=n[0];e=parseInt(n[1].substr(0,1),16);this.tech.InnerSphere=!!(e&1);this.tech.Clan=!!(e&2);t=parseInt(n[1].substr(1,1),16);this.class.light=!!(t&1);this.class.medium=!!(t&2);this.class.heavy=!!(t&4);this.class.assault=!!(t&8);i=parseInt(n[1].substr(2,1),16);this.variant.normal=!!(i&1);this.variant.champion=!!(i&2);this.variant.hero=!!(i&4);this.variant.special=!!(i&8);u=parseInt(n[1].substr(3,1),16);this.weapon.ballistic=!!(u&1);this.weapon.energy=!!(u&2);this.weapon.missile=!!(u&4);r=parseInt(n[1].substr(4,1),16);this.upgrade.armor=!!(r&1);this.upgrade.structure=!!(r&2);this.upgrade.heatsink=!!(r&4);this.upgrade.guidance=!!(r&8);o=parseInt(n[1].substr(5,1),16);this.engine.std=!!(o&1);this.engine.xl=!!(o&2);f=parseInt(n[1].substr(6,1),16);this.other.quirk=!!(f&1);this.other.armor=!!(f&2);this.other.jumpjet=!!(f&4);this.design.designer=n[2];this.seed.seed=n[3]},n}(),f=function(){function n(){this.mech=[];this.weapon=[];this.engine=[]}return n}(),a=function(){function n(){}return n}(),v=function(){function n(n){var t=this;(this.id=0,this.name=null,this.description=null,this.chassis={},this.variants={},this.roles=[],this.default=!1,n!==null)&&(this.id=n.id,this.name=n.name,this.description=n.description,this.chassis=n.chassis,this.variants=n.variants,n.roles!==undefined&&n.roles.length>0&&n.roles.forEach(function(n){t.roles.push(new i(n))}),this.default=n.default===undefined?!1:n.default)}return n}(),i=function(n){function t(t){var i=this;(t===void 0&&(t=null),n.call(this),this.name=null,this.requirements=[],this.loadout=new e,t!==null)&&(this.name=t.name,t.requirements!==undefined&&t.requirements.length>0&&t.requirements.forEach(function(n){i.requirements.push(new y(n))}),this.loadout=new e(t.loadout),t.weight!==undefined&&(this.weight=t.weight))}return __extends(t,n),t}(UnknownLibrary.Weighting),y=function(){function n(n){(this.tons={min:0,max:100},this.hardpoints=new Mechwarrior.MechHardpoints,this.ecm=!1,this.jumpjets=!1,n!==null)&&(n.tons!==undefined&&(n.tons.min!==undefined&&(this.tons.min=n.tons.min),n.tons.max!==undefined&&(this.tons.max=n.tons.max)),this.hardpoints=new Mechwarrior.MechHardpoints(n.hardpoints),n.ecm!==undefined&&(this.ecm=n.ecm),n.jumpjets!==undefined&&(this.jumpjets=n.jumpjets))}return n}(),e=function(){function n(n){(n===void 0&&(n=null),this.armor=new UnknownLibrary.MinMax(50,100),this.heatsink=new UnknownLibrary.MinMax(100,140),this.jumpjets=new UnknownLibrary.MinMax(0,100),this.upgrades=new o,this.ecm=1,n!==null)&&(this.armor=new UnknownLibrary.MinMax(n.armor.min,n.armor.max),this.heatsink=new UnknownLibrary.MinMax(n.heatsink.min,n.heatsink.max),this.jumpjets=new UnknownLibrary.MinMax(n.jumpjets.min,n.jumpjets.max),this.upgrades=new o(n.upgrades),n.engines!==undefined&&(this.engines=new p(n.engines)),n.weapons!==undefined&&(this.weapons=new h(n.weapons)))}return n}(),o=function(){function n(n){(n===void 0&&(n=null),this.armor=1,this.structure=1,this.heatsink=1,this.guidance=1,n!==null)&&(this.armor=n.armor,this.structure=n.structure,this.heatsink=n.heatsink,this.guidance=n.guidance)}return n}(),p=function(){function n(n){var t,i;if(n===void 0&&(n=null),this.tons=new UnknownLibrary.MinMax(-1,100),this.std={},this.xl={},n!==null){n.tons!==undefined&&(this.tons=new UnknownLibrary.MinMax(n.tons.min,n.tons.max));for(t in n)if(n.hasOwnProperty(t)&&this.hasOwnProperty(t)&&t!=="tons")for(i in n[t])n[t].hasOwnProperty(i)&&(this[t][i]=n[t][i])}}return n}(),s=function(n){function t(t,i){if(t===void 0&&(t=null),i===void 0&&(i=null),n.call(this),this.type=Mechwarrior.Enum.EngineType.std,this.rating=0,this.tons=0,t!==null){for(var r in t)t.hasOwnProperty(r)&&this.hasOwnProperty(r)&&t[r]!==undefined&&(this[r]=t[r]);t.weight!==undefined?this.weight=t.weight:i!==null&&(this.weight=i)}}return __extends(t,n),t}(UnknownLibrary.Weighting),h=function(){function n(n){var t,i;if(n===void 0&&(n=null),this.primary={},this.secondary={},this.tertiary={},n!==null)for(t in n)if(n.hasOwnProperty(t))for(i in n[t])n[t].hasOwnProperty(i)&&this.hasOwnProperty(t)&&(this[t][i]=n[t][i])}return n}()}(RandomBuilder||(RandomBuilder={}));app=angular.module("app",[]).service("xorshift",[UnknownLibrary.XorShift]).service("dataManager",["$http","$q",RandomBuilder.DataManager]).service("buildManager",["xorshift","dataManager",RandomBuilder.BuildManager]).component("builder",{templateUrl:"./template/form.html",controller:["dataManager","buildManager",RandomBuilder.Controller],controllerAs:"rb"}).component("debug",{templateUrl:"./template/mech.html",controller:["dataManager","buildManager",RandomBuilder.Controller],controllerAs:"rb"}).filter("capitalize",UnknownLibrary.Angular.Filter.Capitalize);angular.bootstrap(document.body,[app.name]);